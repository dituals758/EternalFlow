<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#0c0d2d" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>Вечный поток - Мастер отслеживания времени</title>
    <link rel="manifest" href="./manifest.json" />
    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
    <div class="dynamic-island" id="dynamicIsland" aria-label="Установка приложения" role="group" style="display: none;">
        <div class="island-text">Вечный поток</div>
    </div>

    <div class="particles" id="particles"></div>

    <svg class="dragon-element dragon-1" viewBox="0 0 512 512" aria-hidden="true">
        <path fill="var(--dragon-red)" d="M256,32C132.3,32,32,132.3,32,256s100.3,224,224,224s224-100.3,224-224S379.7,32,256,32z M410.5,297.5l-32.9,32.9l-16.5-16.5l32.9-32.9L410.5,297.5z M365.9,252.9l-32.9,32.9l-16.5-16.5l32.9-32.9L365.9,252.9z M321.3,208.3l-32.9,32.9l-16.5-16.5l32.9-32.9L321.3,208.3z M276.7,163.7l-32.9,32.9l-16.5-16.5l32.9-32.9L276.7,163.7z"/>
    </svg>

    <svg class="dragon-element dragon-2" viewBox="0 0 512 512" aria-hidden="true">
        <path fill="var(--dragon-red)" d="M256,32C132.3,32,32,132.3,32,256s100.3,224,224,224s224-100.3,224-224S379.7,32,256,32z M410.5,297.5l-32.9,32.9l-16.5-16.5l32.9-32.9L410.5,297.5z M365.9,252.9l-32.9,32.9l-16.5-16.5l32.9-32.9L365.9,252.9z M321.3,208.3l-32.9,32.9l-16.5-16.5l32.9-32.9L321.3,208.3z M276.7,163.7l-32.9,32.9l-16.5-16.5l32.9-32.9L276.7,163.7z"/>
    </svg>

    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon" aria-label="Иконка приложения">
                    <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true">
                        <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4Z"/>
                        <path fill="white" d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
                    </svg>
                </div>
                <div>
                    <h1>Вечный поток</h1>
                    <div class="logo-subtitle">Мастер отслеживания времени</div>
                </div>
            </div>
        </header>

        <main>
            <div class="event-form" aria-label="Форма добавления события">
                <div class="form-group">
                    <label for="eventTitle" class="form-label">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg>
                        Название события
                    </label>
                    <input type="text" id="eventTitle" class="form-input form-input-large" 
                           placeholder="Например: Новый год, День рождения, Дедлайн проекта" maxlength="50" required 
                           autocomplete="off" autocorrect="on" autocapitalize="sentences" />
                </div>

                <div class="form-group">
                    <label for="eventDate" class="form-label">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"/></svg>
                        Дата и время
                    </label>
                    <input type="datetime-local" id="eventDate" class="form-input" required />
                </div>

                <button id="saveEventBtn" class="btn" aria-label="Добавить событие">
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                        <path fill="white" d="M17,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3M19,19H5V5H16.17L19,7.83V19M12,12A4,4 0 0,0 8,16A4,4 0 0,0 12,20A4,4 0 0,0 16,16A4,4 0 0,0 12,12Z"/>
                    </svg>
                    Добавить событие
                </button>
            </div>

            <div class="import-export" aria-label="Импорт и экспорт данных">
                <button id="importBtn" class="action-btn">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/></svg>
                    Импортировать данные
                </button>
                <button id="exportBtn" class="action-btn">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/></svg>
                    Экспортировать данные
                </button>
            </div>

            <div class="events-container" id="eventsContainer" aria-label="Список событий">
                <!-- События будут генерироваться динамически -->
            </div>

            <div class="app-info" aria-label="Информация об aplicativo">
                <p>Данные хранятся только на вашем устройстве - 100% конфиденциальность</p>
                <p>Разработано c помошью gpt-5-nano. Дизайн иконки shedevrum.ai.</p>
            </div>
        </main>
    </div>

    <div class="notification" id="notification" role="status" aria-live="polite"></div>

    <script type="module" src="./app.js"></script>
    <script>
        // Установка динамического острова (PWA) будет инициирована внутри app.js
        // По умолчанию скрипт активен после загрузки модуля.
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(() => {
                        // зарегестрирован
                    })
                    .catch(() => {
                        // ошибка регистрации
                    });
            });
        }
    </script>
</body>
</html>